schema: puppet-2019-04-01

accounts:
  - account_id: '105463962595'
    name: 'eamonnf+large-org-testing-manual-1'
    default_region: eu-west-1
    regions_enabled:
      - eu-west-1
      - eu-west-2
      - eu-west-3
    tags:
      - group:hub
      - group:all
#
#  - ou: '/ten'
#    name: 'ten'
#    default_region: eu-west-1
#    regions_enabled:
#      - eu-west-1
#      - eu-west-2
#      - eu-west-3
#    tags:
#      - group:10
#      - group:all
#
#  - ou: '/twenty'
#    name: 'twenty'
#    default_region: eu-west-1
#    regions_enabled:
#      - eu-west-1
#      - eu-west-2
#      - eu-west-3
#    tags:
#      - group:20
#      - group:all
#
#  - ou: '/thirty'
#    name: 'thirty'
#    default_region: eu-west-1
#    regions_enabled:
#      - eu-west-1
#      - eu-west-2
#      - eu-west-3
#    tags:
#      - group:30
#      - group:all
#
#  - ou: '/fifty'
#    name: 'fifty'
#    default_region: eu-west-1
#    regions_enabled:
#      - eu-west-1
#      - eu-west-2
#      - eu-west-3
#    tags:
#      - group:50
#      - group:all
#
#  - ou: '/hundred'
#    name: 'hundred'
#    default_region: eu-west-1
#    regions_enabled:
#      - eu-west-1
#      - eu-west-2
#      - eu-west-3
#    tags:
#      - group:100
#      - group:all
#
#  - ou: '/foo'
#    name: 'foo'
#    default_region: eu-west-1
#    regions_enabled:
#      - eu-west-1
#      - eu-west-2
#      - eu-west-3
#    tags:
#      - group:foo

launches:
  service-catalog-framework-roles-f:
    portfolio: f-mandatory
    product: aws-iam-administrator-access-assumable-role-account
    version: v1
    parameters:
      AccountToTrust:
        default: '105463962595'
      RoleName:
        default: AdminCrossAccountFromFactoryfff
      Path:
        default: '/'
    deploy_to:
      tags:
        - tag: group:10
          regions: default_region
        - tag: group:20
          regions: default_region
        - tag: group:30
          regions: default_region
        - tag: group:all
          regions: default_region

  service-catalog-framework-roles-f1:
    portfolio: f-mandatory
    product: aws-iam-administrator-access-assumable-role-account
    version: v1
    depends_on:
      - service-catalog-framework-roles-ffff
    parameters:
      AccountToTrust:
        default: '105463962595'
      RoleName:
        default: AdminCrossAccountFromFactoryf1ff
      Path:
        default: '/'
    deploy_to:
      tags:
        - tag: group:10
          regions: default_region
        - tag: group:20
          regions: default_region
        - tag: group:30
          regions: default_region
        - tag: group:all
          regions: default_region
        # - tag: group:50
        #   regions: default_region
        # - tag: group:100
        #   regions: default_region
  #        - tag: group:foo
  #          regions: default_region


  service-catalog-framework-roles-ffff:
    portfolio: f-mandatory
    product: aws-iam-administrator-access-assumable-role-account
    version: v1
    parameters:
      AccountToTrust:
        default: '105463962595'
      RoleName:
        default: AdminCrossAccountFromFactoryffff
      Path:
        default: '/'
    deploy_to:
      tags:
        - tag: group:10
          regions: default_region
        - tag: group:20
          regions: default_region
        - tag: group:30
          regions: default_region
        - tag: group:all
          regions: default_region

  service-catalog-framework-roles-f2:
    portfolio: f-mandatory
    product: aws-iam-administrator-access-assumable-role-account
    version: v1
    # status: terminated
    parameters:
      AccountToTrust:
        default: '105463962595'
      RoleName:
        default: AdminCrossAccountFromFactoryf2
      Path:
        default: '/'
    deploy_to:
      tags:
        - tag: group:10
          regions: default_region
        - tag: group:20
          regions: default_region
        - tag: group:30
          regions: default_region

spoke-local-portfolios:
  k-mandatory-to-group-all-enabled_regions:
    portfolio: k-mandatory
    deploy_to:
      tags:
        - tag: group:all
          regions: enabled_regions
        - tag: group:hub
          regions: enabled_regions

  f-mandatory-to-group-10:
    portfolio: f-mandatory
    deploy_to:
      tags:
        - tag: group:10
          regions: default_region
        - tag: group:all
          regions: default_region

#   e-mandatory-to-group-20:
#     portfolio: e-mandatory
#     deploy_to:
#       tags:
#         - tag: group:20
#           regions: default_region

#   f-mandatory-to-group-20:
#     portfolio: f-mandatory
#     deploy_to:
#       tags:
#         - tag: group:20
#           regions: default_region

#   g-mandatory-to-group-all:
#     portfolio: g-mandatory
#     deploy_to:
#       tags:
#         - tag: group:all
#           regions: enabled_regions

#   h-mandatory-to-group-all:
#     portfolio: h-mandatory
#     deploy_to:
#       tags:
#         - tag: group:all
#           regions: enabled_regions



